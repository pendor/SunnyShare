#!/bin/bash
# Mostly proof of concept for a brute force i2c write to the screen

set -e

CHARGEPUMP="0x8D"
COLUMNADDR="0x21"
COMSCANDEC="0xC8"
COMSCANINC="0xC0"
DISPLAYALLON="0xA5"
DISPLAYALLON_RESUME="0xA4"
DISPLAYOFF="0xAE"
DISPLAYON="0xAF"
EXTERNALVCC="0x01"
INVERTDISPLAY="0xA7"
MEMORYMODE="0x20"
NORMALDISPLAY="0xA6"
PAGEADDR="0x22"
SEGREMAP="0xA0"
SETCOMPINS="0xDA"
SETCONTRAST="0x81"
SETDISPLAYCLOCKDIV="0xD5"
SETDISPLAYOFFSET="0xD3"
SETHIGHCOLUMN="0x10"
SETLOWCOLUMN="0x00"
SETMULTIPLEX="0xA8"
SETPRECHARGE="0xD9"
SETSEGMENTREMAP="0xA1"
SETSTARTLINE="0x40"
SETVCOMDETECT="0xDB"
SWITCHCAPVCC="0x02"

BUS=1
ADDR="0x3c"

CMD="0x00"
DATA="0x40"

echo init
# init the screen:
i2cset -f -y $BUS $ADDR $CMD \
  $DISPLAYOFF \
  $SETDISPLAYCLOCKDIV 0x80 \
  $SETMULTIPLEX 0x3F \
  $SETDISPLAYOFFSET 0x00 \
  $SETSTARTLINE \
  $CHARGEPUMP 0x14 \
  $MEMORYMODE 0x00 \
  $SEGREMAP \
  $COMSCANDEC \
  $SETCOMPINS 0x12 \
  $SETCONTRAST 0xCF \
  $SETPRECHARGE 0xF1 \
  $SETVCOMDETECT 0x40 \
  $DISPLAYALLON_RESUME \
  $NORMALDISPLAY \
  $DISPLAYON \
  i


echo width
# Set blit width
i2cset -f -y $BUS $ADDR $CMD $COLUMNADDR 0x00 0x7f i

echo height
# Set blit height
i2cset -f -y $BUS $ADDR $CMD $PAGEADDR 0x00 0x3f i

echo data
# Now dump the data... 16 bytes per row (8 bits x 16 = 128 pixels) and 64 rows
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0xc0 0xc0 0xf0 i
i2cset -f -y $BUS $ADDR $DATA 0x3a 0x0c 0x00 0x40 0xc0 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x04 0x08 0x78 0xf0 0x00 0x00 0x08 i
i2cset -f -y $BUS $ADDR $DATA 0x18 0x30 0xf0 0xc0 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x80 0xc0 0xe7 0xff 0xf6 i
i2cset -f -y $BUS $ADDR $DATA 0x7c 0xb8 0xbc 0xde 0x8f 0x02 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x80 0x80 0x00 0x40 0xf0 0xf8 0x38 i
i2cset -f -y $BUS $ADDR $DATA 0x18 0x18 0x08 0x0c 0x8c 0x02 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x07 0x07 0x07 0x06 i
i2cset -f -y $BUS $ADDR $DATA 0xfa 0xff 0xff 0xe7 0xcc 0x8e 0x9e 0x7e i
i2cset -f -y $BUS $ADDR $DATA 0x7e 0x3e 0x9c 0xdf 0xdf 0xcf 0xef 0xce i
i2cset -f -y $BUS $ADDR $DATA 0xe8 0xc4 0xcf 0xdf 0xdf 0x9f 0xbe 0x3f i
i2cset -f -y $BUS $ADDR $DATA 0x7f 0x3f 0xc7 0xc7 0xf7 0xff 0xf7 0x0e i
i2cset -f -y $BUS $ADDR $DATA 0x06 0x06 0x06 0x03 0x01 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x80 0xc0 0xc0 0x60 0x70 0x30 i
i2cset -f -y $BUS $ADDR $DATA 0xf0 0xe0 0x40 0xe0 0xf0 0xf8 0x7c 0x7c i
i2cset -f -y $BUS $ADDR $DATA 0x7d 0xff 0xff 0xff 0x07 0xe3 0xf8 0xfe i
i2cset -f -y $BUS $ADDR $DATA 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff i
i2cset -f -y $BUS $ADDR $DATA 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff i
i2cset -f -y $BUS $ADDR $DATA 0xfe 0xf8 0xe3 0x07 0xff 0xff 0x7c 0x7c i
i2cset -f -y $BUS $ADDR $DATA 0x7c 0x7c 0xf8 0xf0 0xc0 0x60 0xe0 0x70 i
i2cset -f -y $BUS $ADDR $DATA 0x70 0x60 0x60 0xc0 0xc0 0x80 0x00 0x80 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x01 0x01 0x01 0x00 0x08 0x08 0x18 i
i2cset -f -y $BUS $ADDR $DATA 0x18 0x0e 0x0f 0x07 0x03 0x05 0x1e 0x1e i
i2cset -f -y $BUS $ADDR $DATA 0xbe 0xbe 0xfe 0xf9 0xc0 0x87 0x3f 0x7f i
i2cset -f -y $BUS $ADDR $DATA 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff i
i2cset -f -y $BUS $ADDR $DATA 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xff i
i2cset -f -y $BUS $ADDR $DATA 0xff 0x3f 0x8f 0xe0 0xfc 0xff 0xfe 0x9e i
i2cset -f -y $BUS $ADDR $DATA 0x1e 0x1e 0x0e 0x03 0x07 0x0f 0x0e 0x18 i
i2cset -f -y $BUS $ADDR $DATA 0x18 0x08 0x08 0x00 0x01 0x01 0x01 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x80 0xc0 0xc0 0xd6 i
i2cset -f -y $BUS $ADDR $DATA 0xff 0xff 0xff 0x07 0xe7 0xe3 0xfa 0xfc i
i2cset -f -y $BUS $ADDR $DATA 0xf9 0x79 0x33 0xd7 0xf7 0xe7 0xe7 0xef i
i2cset -f -y $BUS $ADDR $DATA 0x27 0x4f 0xe7 0xf7 0xf7 0xf3 0x39 0x7d i
i2cset -f -y $BUS $ADDR $DATA 0xfe 0xfe 0xfe 0xf1 0xf3 0x77 0x7f 0xf7 i
i2cset -f -y $BUS $ADDR $DATA 0xb0 0x38 0x30 0x30 0x20 0xc0 0x80 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x40 0x7f 0x1f 0x01 0x01 0x21 i
i2cset -f -y $BUS $ADDR $DATA 0x30 0x1b 0x1f 0x07 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x03 0x07 0xcf 0xef 0xfe i
i2cset -f -y $BUS $ADDR $DATA 0x5c 0x3e 0x77 0xf7 0xe3 0x01 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x03 0x0f i
i2cset -f -y $BUS $ADDR $DATA 0x0f 0x0c 0x08 0x0c 0x18 0x08 0x38 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x03 0x07 0x1d i
i2cset -f -y $BUS $ADDR $DATA 0x78 0x60 0x00 0x04 0x07 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i
i2cset -f -y $BUS $ADDR $DATA 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 i

